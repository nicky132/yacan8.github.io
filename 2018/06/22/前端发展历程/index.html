<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="前端,模块化," />










<meta name="description" content="从HTML说起（老鸟可跳过本节）学前端应该都是从 HTML 开始的吧，1991年的时候出现了世界上第一个网页，感受下当年的源代码： 12345678&amp;lt;HEADER&amp;gt;&amp;lt;TITLE&amp;gt;The World Wide Web project&amp;lt;/TITLE&amp;gt;&amp;lt;NEXTID N=&quot;55&quot;&amp;gt;&amp;lt;/HEADER&amp;gt;&amp;lt;BODY&amp;gt;&amp;lt;H1&amp;gt;W">
<meta name="keywords" content="前端,模块化">
<meta property="og:type" content="article">
<meta property="og:title" content="浅谈前端技术的发展">
<meta property="og:url" content="http://yoursite.com/2018/06/22/前端发展历程/index.html">
<meta property="og:site_name" content="杨溜溜的博客">
<meta property="og:description" content="从HTML说起（老鸟可跳过本节）学前端应该都是从 HTML 开始的吧，1991年的时候出现了世界上第一个网页，感受下当年的源代码： 12345678&amp;lt;HEADER&amp;gt;&amp;lt;TITLE&amp;gt;The World Wide Web project&amp;lt;/TITLE&amp;gt;&amp;lt;NEXTID N=&quot;55&quot;&amp;gt;&amp;lt;/HEADER&amp;gt;&amp;lt;BODY&amp;gt;&amp;lt;H1&amp;gt;W">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-11-17T07:57:47.215Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浅谈前端技术的发展">
<meta name="twitter:description" content="从HTML说起（老鸟可跳过本节）学前端应该都是从 HTML 开始的吧，1991年的时候出现了世界上第一个网页，感受下当年的源代码： 12345678&amp;lt;HEADER&amp;gt;&amp;lt;TITLE&amp;gt;The World Wide Web project&amp;lt;/TITLE&amp;gt;&amp;lt;NEXTID N=&quot;55&quot;&amp;gt;&amp;lt;/HEADER&amp;gt;&amp;lt;BODY&amp;gt;&amp;lt;H1&amp;gt;W">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/22/前端发展历程/"/>





  <title>浅谈前端技术的发展 | 杨溜溜的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">杨溜溜的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录学习的技能和遇到的问题</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/22/前端发展历程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杨溜溜">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/icon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨溜溜的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">浅谈前端技术的发展</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-22T16:17:48+08:00">
                2018-06-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="从HTML说起（老鸟可跳过本节）"><a href="#从HTML说起（老鸟可跳过本节）" class="headerlink" title="从HTML说起（老鸟可跳过本节）"></a>从HTML说起（老鸟可跳过本节）</h2><p>学前端应该都是从 HTML 开始的吧，1991年的时候出现了世界上第一个网页，感受下当年的源代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">HEADER</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">TITLE</span>&gt;</span>The World Wide Web project<span class="tag">&lt;/<span class="name">TITLE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">NEXTID</span> <span class="attr">N</span>=<span class="string">"55"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">HEADER</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BODY</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">H1</span>&gt;</span>World Wide Web<span class="tag">&lt;/<span class="name">H1</span>&gt;</span></span><br><span class="line">The WorldWideWeb (W3) is a wide-area</span><br><span class="line"><span class="tag">&lt;<span class="name">A</span> <span class="attr">NAME</span>=<span class="string">0</span> <span class="attr">HREF</span>=<span class="string">"WhatIs.html"</span>&gt;</span>hypermedia ...<span class="tag">&lt;/<span class="name">A</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>一开始全都是标签，而且没有规范，于是一帮人组成了复仇者万维网联盟专门来搞网络标准化，也就是今天常说的 W3C。</p>
<p>当时的网页只能做简单信息展示还很 LOW，后来一家叫 SUN 的公司搞了个 Java 小程序(Applet)，可以跑在网页中制造很酷炫的效果。另外一家叫网景的公司觉得很牛逼，于是赶紧招人准备出复刻版，由于项目紧，程序员花了两周时间搞出了JavaScript，结果项目上线后效果出乎意外的好！于是 JS 大火。</p>
<p>有了 JS 用户就可以和网页更好的交互了，但是页面还是很 LOW，于是又过了一年，CSS 出现了，专门用来美化页面。至此，前端三巨头诞生了，网页看起来终于有模有样了，于是 WEB 发展进入繁荣时代，出现了一大波新技术比如 Spring/JSP/ASP/AJAX 等等,也出现了一大波浏览器比如 IE、Firefox、Safari、Chrome、Opera…</p>
<p>于是前端出现了一个非常棘手的问题：浏览器兼容问题。同一个DOM操作需要写很多适配代码来兼容不同浏览器，这是一个很枯燥低效的事情。于是jQuery 诞生了：一套代码，多端运行。众前端大喜，纷纷使用至今。</p>
<p>由于技术发展飞快，人们对网页的要求越来越高，这时一家叫 Google 的公司认为浏览器需要更好的体验和性能，JS 需要一款更快速的引擎来迎接现代化 Web 应用。而当时微软的 IE6 占据了大部分市场份额，微软认为 IE6 已经很完美了，于是解散了IE6开发团队。</p>
<p>后来的事大家都知道了，IE 成了前端开发的阴影，而谷歌的 Chrome 搭上 V8 引擎上了天，美滋滋，也就由于浏览器性能的提升，W3C也为此提供了 HTML 的新特性，也就是我们现在说的 HTML5、CSS3，让我们能在网页是很快的完成一些酷炫的特效。。。</p>
<h2 id="从模块化说起"><a href="#从模块化说起" class="headerlink" title="从模块化说起"></a>从模块化说起</h2><p>模块化开发的主要目的是实现代码的结构化，提高代码复用性、可维护性、可扩展性。JavaScript 天生没有模块化的概念（直到ES6），而不像后端语言源生自带模块功能， 比如 Java 的 import、C++ 的 include，所以需要通过其他的方式来实现模块化。</p>
<h3 id="没有模块化的日子"><a href="#没有模块化的日子" class="headerlink" title="没有模块化的日子"></a>没有模块化的日子</h3><p>JavaScript 的最初，为了达到模块化的目的，我们往往会把一些重复使用的代码封装成一个 function，需要用到的时候时候去调用它，那么这可以看做是一种模块化，如下一段代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">element</span>) </span>&#123; <span class="comment">// 展示一个元素 &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hide</span>(<span class="params">element</span>) </span>&#123; <span class="comment">// 隐藏一个元素 &#125;</span></span><br></pre></td></tr></table></figure>
<p>代码很直观，就是要显示、隐藏一个 dom 元素，往往这种方法需要大范围多次调用，一般我们可能会放到 util.js 这样的文件里，这是第一步。接下来我们可以在业务代码 page1.js、page2.js 中使用这两个方法，我们把两个js引入到html中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/page1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/page2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h3><p>以现在的经验来看，上面的写法会带来非常明显的问题，当然也是在这个模块化引入阶段逐步暴露的。</p>
<ul>
<li>全局变量冲突风险：如果编写 page-1 的同学不知道 utils 里面有一个 show/hide 方法，然后他自个也写了一个，同时还添加了额外逻辑，自然就覆盖了原来的方法，那么 page-2 同学在不知道的情况下调用了这方法，自然会发生错误.</li>
<li>人工维护依赖关系：因为存在依赖关系，所以必须先加载 util，然后才能加载 page-1/2，这里的例子非常简单，但在实际项目场景了，这样的依赖会非常多且复杂，维护非常困难，很难建立清晰的依赖关系。</li>
</ul>
<h3 id="尝试去解决存在的问题"><a href="#尝试去解决存在的问题" class="headerlink" title="尝试去解决存在的问题"></a>尝试去解决存在的问题</h3><p>针对问题1，全局变量冲突的风险，我们可以参考其他后端语言的特性，将变量声明到特定的命名空间里面，只要按照特定的规范来声明变量及命名空间，那么基本可以避免变量冲突的问题，如，可以按照实际情况具体到部门、team、类库来声明命名空间：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> com.company.departure.team.utils = &#123;</span><br><span class="line">  show: <span class="function"><span class="keyword">function</span>(<span class="params">ele</span>) </span>&#123;&#125;, <span class="comment">// 显示元素</span></span><br><span class="line">  hide: <span class="function"><span class="keyword">function</span>(<span class="params">ele</span>) </span>&#123;&#125; <span class="comment">// 隐藏元素</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是还存在另外一个问题，就是 show、hide 函数里面可能依赖一些外部的变量，那么这些变量我们定义在哪的，这个时候我们可以封装一个立即执行函数，把这些变量都存放在里面，避免这些变量污染到全局变量，如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mudule = &#123;&#125;;  <span class="comment">// 全局存放的模块</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> Company = Company || &#123;&#125;;</span><br><span class="line">   Company.Base = Company.Base || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> name = <span class="string">'username'</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">show</span> (<span class="params"></span>) </span>&#123;&#125;  <span class="comment">// 内部引用 name 变量</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">hide</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">   mudule[<span class="string">'Company.Base.Util'</span>] = Company.Base.Util = &#123;</span><br><span class="line">     show: show,</span><br><span class="line">     hide: hide</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>这个立即执行函数，通过闭包把需要导出的模块丢到我们全局配置 mudule 中，从而达到了模块化的目的，同时也解决了全局变量冲突的风险。</p>
<p>那针对第二个问题人工维护依赖关系，在客户端层面，一直没有一个比较比较好的解决方案，当然，我们能想到最好的方式，那就是只有一个js，被依赖的库在这个js的前面先被声明，这样技能减少http请求，也能把依赖问题解决。那么，为了达到这样的效果，我们需要在代码运行之前，事先知道模块之间的依赖关系，这个时候我们需要对js进行预处理，然后把所有js代码进行合并。</p>
<p>后来，一个来自雅虎，叫 YUI compressor 的工具横空出世，它可以完成代码的合并与压缩，因为这个，那个时候业界内的网站优化以雅虎为标准，然而，适合模块化的通用工具并未出现，我们还是得手动确定依赖进行混淆合并压缩，而且 YUI compressor 是基于 Java 的，对前端同学来说，并不是很友好。</p>
<h3 id="NodeJs-来了"><a href="#NodeJs-来了" class="headerlink" title="NodeJs 来了"></a>NodeJs 来了</h3><p>2009年，一个基于 JavaScript 的服务端语言 NodeJS 发布了，这给前端同学带来了无限的可能，也就是说，以往需要通过其他语言工具执行的编译过程也可以由前端一手接管。同时，node 也带来了 commonJS，给前端的模块化提供了新的思路。当然，commonJS 并不是 NodeJs 的产物，他只是按照该规范做了一套实现。</p>
<h3 id="commonJs"><a href="#commonJs" class="headerlink" title="commonJs"></a>commonJs</h3><p>简单概括下 commonJS 的几个概念</p>
<ul>
<li>每个文件是一个模块，有自己的作用域。这里面定义到函数、变量、类都是私有的，对其他文件不可见；</li>
<li>每个模块内部，module 变量代表当前模块，它是一个对象；</li>
<li>module 的 exports 属性（即 module.exports）是对外的接口；加载某个模块，其实是加载该模块的 module.exports 属性如果文件中没有 exports 属性，那么外部引用不到任何东西；</li>
<li>使用 require 关键字加载对应的文件，也就是模块；</li>
<li>require 命令的基本功能是，读入并执行一个 JavaScript 文件，然后返回该模块的 exports 对象，如果没有发现该模块，报错。</li>
</ul>
<p>我们利用 commonJs 对上面的例子进行改进：<br>util.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hide</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.show = show;</span><br><span class="line"><span class="built_in">module</span>.exports.hide = hide;</span><br></pre></td></tr></table></figure>
<p>page-1.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'./util.js'</span>);</span><br><span class="line">util.show();</span><br></pre></td></tr></table></figure>
<p>然而，这样的代码无法在客户端执行，因为浏览器识别不到 commonJS，我们需要解析 commonJS，让他变成浏览器可以识别的代码。</p>
<h3 id="打包编译工具"><a href="#打包编译工具" class="headerlink" title="打包编译工具"></a>打包编译工具</h3><p>对于前端同学来说 node 有着天然的亲和力，让我们多了一个全新施展本领的领域，因此，为了解析 commonJS 以及提高开发效率，社区里各种构建工程不断涌出， 具有代表性的有 grunt、gulp、browserify，webpack，前端模块化可以更进一步。</p>
<h3 id="说说-webpack"><a href="#说说-webpack" class="headerlink" title="说说 webpack"></a>说说 webpack</h3><p>说到这里，也就出现了我们目前最流行的编译构建工具 webpack，本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器，在它打包静态资源时候，会根据模块规范，递归地构建一个依赖关系数，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个浏览器可运行的文件。它不仅支持 commonJS 模块， AMD 模块、 ES6 模块、CSS、图片、 JSON、Coffeescript、 LESS 等。</p>
<h3 id="ES6-的模块化方案"><a href="#ES6-的模块化方案" class="headerlink" title="ES6 的模块化方案"></a>ES6 的模块化方案</h3><p>后来，万维网联盟也认识到了前端开发的痛点，实现了一套模块化的方案纳入了 W3C 的标准，也就是我们现在的 ES6（ECMAScript 6） 模块化方案，这种方案是使用 import 关键字导入模块，使用 export 关键字导出模块，当然在实际开发过程中我们通常会使用 babel 来将其转化为 ES5，import 转为了 require，export 转为了 module.exports，即 commonJS。</p>
<h2 id="从react说起"><a href="#从react说起" class="headerlink" title="从react说起"></a>从react说起</h2><p>react 的出现可以说是前端发展的一个里程碑，其双向数据绑定和 MVVM 模式将前端从 DOM 操作中解放出来，可以把重点放在数据和业务上，那么，什么是 MVVM 模式呢？</p>
<h3 id="传统模式"><a href="#传统模式" class="headerlink" title="传统模式"></a>传统模式</h3><p>回到当初，当我们的 MVVM 没有出现的时候，最早我们是使用原生 JavaScript API 对 DOM 进行操作，手动的把视图与数据模型进行同步，因为原生 API 又臭又长，也需要手动完成浏览器兼容问题，后来，jQuery 出现了，它谈不上是框架，只是一个用来简化 DOM 操作的 JavaScript 库，当然它也提供了很多 DOM 以外的工具函数，刚好满足了那个时候的大部分前端开发的需求。但是，随着时代的发展，业务也越是复杂。。。那么手动同步视图与数据模型将是一个噩梦，大量的 DOM 操作代码使得代码臃肿，难以扩展、维护，这个时候 MVVM 的出现无疑是一套完美的解决方案。</p>
<h3 id="MVVM-模式"><a href="#MVVM-模式" class="headerlink" title="MVVM 模式"></a>MVVM 模式</h3><p>说到 MVVM，我们得先从 MVC 说起，众所周知，MVC 是开发客户端最经典的设计模式，但是 MVC 有让人无法忽视的严重问题。</p>
<p>在通常的开发中，除了简单的 Model、View 以外的所有部分都被放在了 Controller 里面。Controller 负责显示界面、响应用户的操作、网络请求以及与 Model 交互。这就导致了 Controller：</p>
<ul>
<li>逻辑复杂，难以维护。</li>
<li>View 紧耦合，无法测试。</li>
</ul>
<p>于是微软的大牛提出了 MVVM，竟然 view 与 controller 紧密相连，那干脆把它们连接在一起，放到一个新的对象里，即 ViewModel，它把 view 与 model 完全隔离开来，通过 ViewModel 层交互，达到双向数据绑定的效果。</p>
<h3 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h3><p>其实，所有 MVVM 模式的框架，如 VueJS、AngularJS、ReactJS，最终都是为了解决一个问题，那就是视图 view 与数据模型 model 的同步，当我们视图中的数据被用户或者其他因素改变时，数据模型会自动得到同步，反过来，数据模型的数据发生变化时，视图也自动得到了更新，这就是双向数据绑定的最终效果。</p>
<h3 id="如何运作"><a href="#如何运作" class="headerlink" title="如何运作"></a>如何运作</h3><p>react 其实只是被定义为一个 view 层，通过组件化的形式，只关注数据呈现，也就是当外部传入的属性发生变化时候，组件会自动进行冲渲染，完成我们数据与视图同步的工作，当然 react 也提供了 state 来充当 ViewModel 这一角色，但是这种方式不被推荐，因为对于大型的前端应用当中，我们需要对数据进行统一的管理，react 组件内的 state 在组件通信上会显得非常吃力，因此出现了 redux、mobx 这类数据模型状态管理中心库，也就是我们的 ViewModel，下面我们针对 mobx 进行讲解。</p>
<p>我们先定义一个 ViewModel：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action &#125; <span class="keyword">from</span> <span class="string">'mobx'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewModel</span> </span>&#123;</span><br><span class="line">  @observable</span><br><span class="line">  name = <span class="string">'ming.xiao'</span>; <span class="comment">// 观测name的变化</span></span><br><span class="line"></span><br><span class="line">  @action</span><br><span class="line">  setName(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ViewModel;</span><br></pre></td></tr></table></figure>
<p>上面代码我们可以把 name 当前 model 数据，下面我们在定义我们的 view：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject, observer &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"></span><br><span class="line">@inject(<span class="string">'viewModel'</span>)</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">View</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  onChange(e) &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.viewModel.setName(e.target.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onClick(e) &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.viewModel.setName(<span class="string">'hong.xiao'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="keyword">this</span>.props.viewModel.name;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line">      &lt;input onChange=&#123;this.onChange.bind(this)&#125; value=&#123;name&#125;/&gt;</span><br><span class="line">      &lt;button onClick=&#123;this.onClick.bind(this)&#125;&gt;改变名字&lt;/button&gt;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default View;</span></span><br></pre></td></tr></table></figure>
<p>mobx 作为一个统一管理数据的中心，提供了 mobx-react 让我们可以把数据 inject 注入到组件里，在渲染方法render里获取并使用，当我们在输入框输入内容时候，viewModel 执行 action 将输入框的值设置到模型数据中，这样我们就达到了视图同步模型数据的目的，当我们点击按钮的时候，viewModel 执行 action 将名字设置为hong.xiao，这个时候组件发现依赖到模型数据name发生了变化，重新执行render方法，这样，我们就实现了数据同步视图的目的，那么我们现在就完成了前面我们所说的双向数据绑定。</p>
<p>那么，这是如何实现的呢？其实，mobx主要做的一件事情就是收集视图数据的依赖，当组件被 observer 的时候，mobx开启了它的依赖收集，然后让组件使用到 ViewModel 里的被 observable 的属性（setter和getter方法被重写）的时候，把组件存入到 mobx 内部，当这个被 observable 的属性被改变的时候，mobx 会通过 observer 改变 inject 到 react 组件的数据，也就是传入到组件内的属性发生了变化，然后组件自动完成重渲染工作，用设计模式来解释就是，使用了发布/订阅模式，mobx 收集依赖的时候属于订阅过程，observable 数据被改变属于发布通知过程，把所有依赖该 observable 的组件进行了一次通知，让其进行重渲染。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>前端技术领域的发展总是趋向于业务，所以，前端基于业务，无法脱离业务，业务飞速发展，前端技术也得快速的更新迭代。。。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/前端/" rel="tag"># 前端</a>
          
            <a href="/tags/模块化/" rel="tag"># 模块化</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/13/JavaScript原型与原型链的理解/" rel="next" title="JavaScript原型与原型链的理解">
                <i class="fa fa-chevron-left"></i> JavaScript原型与原型链的理解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/02/前端性能优化/" rel="prev" title="《高性能网站建议指南》读书笔记">
                《高性能网站建议指南》读书笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/icon.jpg"
                alt="杨溜溜" />
            
              <p class="site-author-name" itemprop="name">杨溜溜</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#从HTML说起（老鸟可跳过本节）"><span class="nav-number">1.</span> <span class="nav-text">从HTML说起（老鸟可跳过本节）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#从模块化说起"><span class="nav-number">2.</span> <span class="nav-text">从模块化说起</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#没有模块化的日子"><span class="nav-number">2.1.</span> <span class="nav-text">没有模块化的日子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存在的问题"><span class="nav-number">2.2.</span> <span class="nav-text">存在的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#尝试去解决存在的问题"><span class="nav-number">2.3.</span> <span class="nav-text">尝试去解决存在的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NodeJs-来了"><span class="nav-number">2.4.</span> <span class="nav-text">NodeJs 来了</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#commonJs"><span class="nav-number">2.5.</span> <span class="nav-text">commonJs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打包编译工具"><span class="nav-number">2.6.</span> <span class="nav-text">打包编译工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#说说-webpack"><span class="nav-number">2.7.</span> <span class="nav-text">说说 webpack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES6-的模块化方案"><span class="nav-number">2.8.</span> <span class="nav-text">ES6 的模块化方案</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#从react说起"><span class="nav-number">3.</span> <span class="nav-text">从react说起</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#传统模式"><span class="nav-number">3.1.</span> <span class="nav-text">传统模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MVVM-模式"><span class="nav-number">3.2.</span> <span class="nav-text">MVVM 模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#双向数据绑定"><span class="nav-number">3.3.</span> <span class="nav-text">双向数据绑定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何运作"><span class="nav-number">3.4.</span> <span class="nav-text">如何运作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">4.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">杨溜溜</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
